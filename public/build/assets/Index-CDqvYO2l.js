import{_ as k}from"./MusicLayout-CwAhJt3T.js";import{l as C,r as b,c as w,w as m,a,b as y,d as e,o as i,e as g,f as x,n as f,v as h,t as u,F,g as A,h as _,i as c}from"./app-C58QEufY.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={name:"ApiKeysIndex",components:{Link:C,MusicLayout:k},props:{apiKeys:Array},data(){return{form:this.$inertia.form({name:""}),editingKey:null,editForm:this.$inertia.form({name:""})}},methods:{createKey(){this.form.post(route("api-keys.store"),{onSuccess:()=>{this.form.reset()}})},editKey(r){this.editingKey=r,this.editForm.name=r.name},updateKey(r){this.editForm.put(route("api-keys.update",{apiKey:r}),{onSuccess:()=>{this.cancelEdit()}})},cancelEdit(){this.editingKey=null,this.editForm.reset()},copyToClipboard(r){navigator.clipboard.writeText(r).then(()=>{alert("Cl√© API copi√©e dans le presse-papiers !")}).catch(t=>{console.error("Erreur lors de la copie:",t);const n=document.createElement("textarea");n.value=r,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),alert("Cl√© API copi√©e dans le presse-papiers !")})}}},M={key:0,class:"mb-6"},I={class:"mb-4"},L={class:"text-red-500"},S=["disabled"],N={key:0,class:"space-y-4"},P={class:"flex justify-between items-start"},V={class:"flex-1"},T={class:"font-bold text-lg"},B={class:"text-sm text-gray-300 mt-1 flex items-center gap-2"},D={class:"bg-gray-800 text-white px-2 py-1 rounded font-mono text-xs"},U=["onClick"],j={class:"text-xs text-gray-400 mt-2"},z={class:"flex gap-2"},G=["onClick"],R={key:0,class:"mt-4"},q=["onSubmit"],H={class:"mb-4"},J={class:"text-red-500"},O={class:"flex gap-2"},Q=["disabled"],W={key:1,class:"text-gray-400"};function X(r,t,n,Y,s,l){const p=b("Link"),v=b("MusicLayout");return i(),w(v,null,{title:m(()=>[...t[4]||(t[4]=[c(" Mes cl√©s API ",-1)])]),actions:m(()=>[_(p,{href:r.route("playlists.index"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded mr-2"},{default:m(()=>[...t[5]||(t[5]=[c(" Retour ",-1)])]),_:1},8,["href"])]),content:m(()=>[r.$page.props.auth.user?(i(),a("div",M,[t[7]||(t[7]=e("h2",{class:"text-xl font-semibold mb-4"},"Cr√©er une nouvelle cl√© API",-1)),e("form",{onSubmit:t[1]||(t[1]=g((...o)=>l.createKey&&l.createKey(...o),["prevent"])),class:"mb-8"},[e("div",I,[t[6]||(t[6]=e("label",{class:"block text-gray-200 text-sm font-bold mb-2",for:"name"}," Nom de la cl√© ",-1)),x(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>s.form.name=o),class:f(["shadow appearance-none border border-gray-600 bg-gray-800 text-white rounded w-full py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",{"border-red-500":s.form.errors.name}]),type:"text",placeholder:"Ex: Mon application mobile"},null,2),[[h,s.form.name]]),e("small",L,u(s.form.errors.name),1)]),e("button",{type:"submit",disabled:s.form.processing,class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"}," G√©n√©rer une cl√© ",8,S)],32)])):y("",!0),e("div",null,[t[11]||(t[11]=e("h2",{class:"text-xl font-semibold mb-4"},"Mes cl√©s API",-1)),n.apiKeys.length>0?(i(),a("ul",N,[(i(!0),a(F,null,A(n.apiKeys,o=>(i(),a("li",{key:o.slug,class:"border border-gray-700 bg-gray-900 rounded p-4"},[e("div",P,[e("div",V,[e("h3",T,u(o.name),1),e("div",B,[t[8]||(t[8]=e("span",null,"Cl√©:",-1)),e("code",D,u(o.key),1),e("button",{onClick:d=>l.copyToClipboard(o.key),class:"text-blue-400 hover:text-blue-300 text-xs underline",title:"Copier la cl√©"}," üìã Copier ",8,U)]),e("p",j," Cr√©√©e le "+u(new Date(o.created_at).toLocaleDateString()),1)]),e("div",z,[e("button",{onClick:d=>l.editKey(o),class:"text-green-500 hover:text-green-700"}," Modifier ",8,G),_(p,{href:r.route("api-keys.destroy",{apiKey:o}),method:"delete",as:"button",class:"text-red-500 hover:text-red-700"},{default:m(()=>[...t[9]||(t[9]=[c(" Supprimer ",-1)])]),_:1},8,["href"])])]),s.editingKey&&s.editingKey.slug===o.slug?(i(),a("div",R,[e("form",{onSubmit:g(d=>l.updateKey(o),["prevent"])},[e("div",H,[t[10]||(t[10]=e("label",{class:"block text-gray-200 text-sm font-bold mb-2",for:"edit_name"}," Nouveau nom ",-1)),x(e("input",{id:"edit_name","onUpdate:modelValue":t[2]||(t[2]=d=>s.editForm.name=d),class:f(["shadow appearance-none border border-gray-600 bg-gray-800 text-white rounded w-full py-2 px-3 leading-tight focus:outline-none focus:border-blue-500",{"border-red-500":s.editForm.errors.name}]),type:"text"},null,2),[[h,s.editForm.name]]),e("small",J,u(s.editForm.errors.name),1)]),e("div",O,[e("button",{type:"submit",disabled:s.editForm.processing,class:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"}," Enregistrer ",8,Q),e("button",{type:"button",onClick:t[3]||(t[3]=(...d)=>l.cancelEdit&&l.cancelEdit(...d)),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"}," Annuler ")])],40,q)])):y("",!0)]))),128))])):(i(),a("p",W,"Aucune cl√© API cr√©√©e pour le moment."))])]),_:1})}const te=E(K,[["render",X]]);export{te as default};
